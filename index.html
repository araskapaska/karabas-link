<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=5">
  <title>KARABAS</title>
  <!-- Favicon –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏ 404 -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé´</text></svg>">
  <style>
    /* –û—Å–Ω–æ–≤–Ω—ã–µ —Å–±—Ä–æ—Å—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: sans-serif;
    }
    html {
      background: #020126;
      overflow-x: hidden;
      min-height: 100vh;
    }
    body {
      background: linear-gradient(to bottom, rgba(2, 1, 38, 0.9), rgba(0, 0, 0, 0.8));
      color: #F2F2F2;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    a {
      color: #F2F2F2;
      text-decoration: none;
    }
    input, select, button {
      color: #F2F2F2;
      background: none;
      border: none;
      font-size: 16px;
      width: 100%;
      padding: 10px;
    }

    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
    .wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 100%;
      flex: 1;
    }
    .container {
      max-width: 1200px;
      width: 100%;
      padding: 0 15px;
    }

    /* –õ–æ–≥–æ—Ç–∏–ø */
    .logo {
      font-size: 48px;
      font-weight: 300;
      color: #EE1C25;
      margin-bottom: 20px;
    }
    .logo-dark {
      color: #020126;
    }

    /* –§–æ—Ä–º–∞ */
    .form-container {
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 8px;
      max-width: 400px;
      width: 100%;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }
    .form-field {
      margin-bottom: 15px;
    }
    .form-field label {
      display: block;
      font-size: 14px;
      font-weight: 300;
      margin-bottom: 5px;
    }
    .form-field input,
    .form-field select {
      background: #020126;
      border: 2px solid #F2F2F2;
      border-radius: 4px;
      font-weight: 400;
      transition: border-color 0.3s;
    }
    .form-field input:focus,
    .form-field select:focus {
      border-color: #EE1C25;
    }
    .form-field input::placeholder {
      color: #8B8B8B;
    }

    /* –ö–Ω–æ–ø–∫–∏ */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 300;
      color: #F2F2F2;
      border: 2px solid #EE1C25;
      padding: 10px;
      border-radius: 4px;
      transition: all 0.3s;
      cursor: pointer;
      margin-bottom: 10px;
    }
    .btn:hover {
      background: #EE1C25;
    }
    .btn-primary {
      background: #EE1C25;
    }
    .btn-primary:hover {
      background: #D1151E;
      border-color: #D1151E;
    }
    .btn-secondary {
      border-color: #976FBF;
    }
    .btn-secondary:hover {
      background: #976FBF;
      border-color: #976FBF;
    }

    /* –ë–∏–ª–µ—Ç */
    .ticket-container {
      background: #FFFFFF;
      color: #020126;
      padding: 20px;
      border-radius: 8px;
      max-width: 500px;
      width: 100%;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
      position: relative;
    }
    .ticket-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    .ticket-title {
      font-size: 36px;
      font-weight: 300;
      margin-bottom: 10px;
    }
    .ticket-qr {
      width: 80px;
      height: 80px;
      margin: 10px auto;
    }
    .ticket-image {
      width: 100%;
      height: 150px;
      background: linear-gradient(45deg, #EE1C25, #976FBF);
      border-radius: 4px;
      margin: 10px 0;
    }
    .ticket-info {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 10px;
    }
    .ticket-info div {
      width: 100%;
    }
    .ticket-info p {
      font-size: 14px;
      font-weight: 400;
      margin: 5px 0;
    }
    .ticket-info p strong {
      font-weight: 700;
    }
    .ticket-barcode {
      background: repeating-linear-gradient(
        90deg,
        #000,
        #000 2px,
        #fff 2px,
        #fff 4px
      );
      width: 100%;
      height: 40px;
      margin: 10px 0;
    }
    .ticket-rules {
      border: 2px solid #020126;
      padding: 10px;
      border-radius: 4px;
      font-size: 10px;
    }
    .ticket-rules h4 {
      font-size: 12px;
      font-weight: 700;
      margin-bottom: 5px;
    }
    .age-restriction {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 12px;
      font-weight: 700;
      border: 2px solid #020126;
      padding: 2px 5px;
      border-radius: 4px;
      background: #FFFFFF;
    }

    /* –î—Ä—É–≥–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è */
    .other-events {
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 8px;
      max-width: 500px;
      width: 100%;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }
    .other-events h3 {
      font-size: 36px;
      font-weight: 300;
      color: #EE1C25;
      margin-bottom: 15px;
    }
    .other-events a {
      display: flex;
      align-items: center;
      background: #020126;
      padding: 10px;
      border-radius: 4px;
      margin-bottom: 10px;
      transition: transform 0.3s;
    }
    .other-events a:hover {
      transform: scale(1.03);
    }
    .other-events .event-image {
      width: 100px;
      height: 60px;
      background: linear-gradient(45deg, #976FBF, #EE1C25);
      border-radius: 4px;
      margin-right: 10px;
    }
    .other-events h4 {
      font-size: 16px;
      font-weight: 400;
    }
    .other-events p {
      font-size: 12px;
      font-weight: 300;
      color: #8B8B8B;
    }

    /* –ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ */
    .privacy-section {
      background: rgba(0, 0, 0, 0.8);
      padding: 20px;
      border-radius: 8px;
      max-width: 400px;
      width: 100%;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
    }
    .privacy-section h3 {
      font-size: 24px;
      font-weight: 300;
      margin-bottom: 10px;
    }
    .privacy-section p {
      font-size: 14px;
      font-weight: 400;
      line-height: 1.5;
    }

    /* –§—É—Ç–µ—Ä */
    .footer {
      background: #000;
      padding: 40px 0;
      width: 100%;
      margin-top: auto;
    }
    .footer p {
      font-size: 20px;
      font-weight: 300;
    }
    .footer a {
      border-bottom: 2px solid #F2F2F2;
      transition: color 0.3s;
    }
    .footer a:hover {
      color: #EE1C25;
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    @media (min-width: 768px) {
      .ticket-info {
        flex-direction: row;
        gap: 20px;
      }
      .ticket-info div {
        width: 48%;
      }
    }
    @media (max-width: 600px) {
      .logo {
        font-size: 36px;
      }
      .form-container, .ticket-container, .other-events, .privacy-section {
        padding: 15px;
      }
      .btn {
        font-size: 16px;
        padding: 8px;
      }
      .ticket-title {
        font-size: 28px;
      }
      .other-events h3 {
        font-size: 28px;
      }
      .ticket-image {
        height: 120px;
      }
    }
  </style>
</head>
<body>
  <div class="wrapper">
    <div class="container">
      <h1 class="logo">KARABAS</h1>
      <div class="form-container" id="form-section">
        <div class="form-field">
          <label>–¢–∏–ø –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</label>
          <select id="event-type">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
            <option value="opera">–û–ø–µ—Ä–∞</option>
            <option value="theater">–¢–µ–∞—Ç—Ä</option>
            <option value="ballet">–ë–∞–ª–µ—Ç</option>
            <option value="standup">–°—Ç–µ–Ω–¥–∞–ø</option>
            <option value="exhibition">–í—ã—Å—Ç–∞–≤–∫–∞</option>
          </select>
        </div>
        <div class="form-field">
          <label>–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</label>
          <select id="event-name">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</option>
          </select>
        </div>
        <div class="form-field">
          <label>–î–∞—Ç–∞</label>
          <input type="date" id="date">
        </div>
        <div class="form-field">
          <label>–í—Ä–µ–º—è</label>
          <input type="time" id="time">
        </div>
        <div class="form-field">
          <label>–ì–æ—Ä–æ–¥</label>
          <input type="text" id="city" placeholder="–ì–æ—Ä–æ–¥">
        </div>
        <div class="form-field">
          <label>–§–ò–û</label>
          <input type="text" id="full-name" placeholder="–§–ò–û">
        </div>
        <div class="form-field">
          <label>–†—è–¥</label>
          <select id="row">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>
        <div class="form-field">
          <label>–ú–µ—Å—Ç–æ</label>
          <select id="seat">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
          </select>
        </div>
        <div class="form-field">
          <label>–°—Ç–æ–∏–º–æ—Å—Ç—å</label>
          <input type="text" id="price" placeholder="–°—Ç–æ–∏–º–æ—Å—Ç—å">
        </div>
        <button class="btn btn-primary" onclick="generateTicket()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>
      </div>
      <div class="privacy-section">
        <h3>–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</h3>
        <p>
          –ù–∞—Å—Ç–æ—è—â–∏–µ —Ñ–µ–π–∫–æ–≤—ã–µ –±–∏–ª–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–ª—è—Ö. –ú—ã –Ω–µ —Å–æ–±–∏—Ä–∞–µ–º,
          –Ω–µ —Ö—Ä–∞–Ω–∏–º –∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–µ–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º—É, –≤–∫–ª—é—á–∞—è –∏–º—è, –≥–æ—Ä–æ–¥ –∏ –¥—Ä—É–≥–∏–µ
          —Å–≤–µ–¥–µ–Ω–∏—è. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –≤–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –±–∏–ª–µ—Ç–∞.
          –ú—ã –Ω–µ –Ω–µ—Å–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö,
          —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è —Ñ–µ–π–∫–æ–≤—ã–º–∏ –∏ –Ω–µ –∏–º–µ—é—Ç —é—Ä–∏–¥–∏—á–µ—Å–∫–æ–π —Å–∏–ª—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –Ω–∞ —Å–≤–æ–π —Å—Ç—Ä–∞—Ö –∏ —Ä–∏—Å–∫.
        </p>
      </div>
      <div class="ticket-container" id="ticket-section" style="display: none;">
        <div class="ticket-header">
          <h3 class="logo logo-dark">KARABAS</h3>
          <p>–≠–õ–ï–ö–¢–†–û–ù–ù–´–ô –ë–ò–õ–ï–¢<br>E-ticket #1745515021</p>
        </div>
        <div class="age-restriction">18+</div>
        <p class="ticket-title" id="ticket-event-name"></p>
        <canvas class="ticket-qr" id="qr-code"></canvas>
        <p id="ticket-date"></p>
        <p id="ticket-time"></p>
        <div class="ticket-image" id="ticket-image"></div>
        <div class="ticket-info">
          <div>
            <p><strong>–ì–û–†–û–î</strong><br><span id="ticket-city"></span></p>
            <p><strong>–†–Ø–î, –ú–ï–°–¢–û</strong><br><span id="ticket-row-seat"></span></p>
          </div>
          <div>
            <p><strong>–§–ò–û</strong><br><span id="ticket-full-name"></span></p>
            <p><strong>–ù–û–ú–ï–† –ó–ê–ö–ê–ó–ê #</strong><br>1745515021</p>
            <p><strong>–°–¢–û–ò–ú–û–°–¢–¨</strong><br><span id="ticket-price"></span></p>
          </div>
        </div>
        <div class="ticket-barcode"></div>
        <div class="ticket-rules">
          <h4>–ü–†–ê–í–ò–õ–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø –ò –í–û–ó–í–†–ê–¢–ê –ë–ò–õ–ï–¢–ê</h4>
          <p>
            1. –ù–∞—Å—Ç–æ—è—â–∏–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –±–∏–ª–µ—Ç —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–≤–Ω—ã–º –ø–æ –∫–æ–Ω—Å—É–ª—å—Å—Ç–≤—É –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π.<br>
            2. –£–∫–∞–∑–∞–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (—à—Ç—Ä–∏—Ö-–∫–æ–¥), —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –≤ —Å–µ–±–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–ª–∞–¥–µ–ª—å—Ü–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è.<br>
            3. –í —Å–ª—É—á–∞–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º, —Ç–∞–∫–∏—Ö –∫–∞–∫ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–µ.<br>
            4. –ü–∏—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∞ –∑–∞–ø—Ä–µ—â–µ–Ω–∞ –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤.<br>
            5. –°—Ç–æ–∏–º–æ—Å—Ç—å –Ω–∞—Å—Ç–æ—è—â–µ–≥–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –±–∏–ª–µ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –ø–æ –ø–µ—Ä–≤–æ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é.<br>
            6. –° —É—Å–ª–æ–≤–∏–µ–º –æ–±–º–µ–Ω–∞ –≤—ã –º–æ–∂–µ—Ç–µ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –Ω–∞ –Ω–∞—à–µ–º —Å–∞–π—Ç–µ.
          </p>
        </div>
      </div>
      <div class="form-container" id="ticket-buttons" style="display: none;">
        <button class="btn btn-primary" onclick="downloadPNG()">–°–∫–∞—á–∞—Ç—å –∫–∞–∫ PNG</button>
        <button class="btn btn-primary" onclick="downloadPDF()">–°–∫–∞—á–∞—Ç—å –∫–∞–∫ PDF</button>
        <button class="btn" onclick="goBack()">–ù–∞–∑–∞–¥</button>
        <button class="btn btn-secondary" onclick="goToEventSite()">–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å–∞–π—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</button>
      </div>
      <div class="other-events" id="other-events" style="display: none;">
        <h3>–î—Ä—É–≥–∏–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
        <a href="event-lebedinoe.html">
          <div class="event-image"></div>
          <div>
            <h4>–õ–µ–±–µ–¥–∏–Ω–æ–µ –æ–∑–µ—Ä–æ</h4>
            <p>30 –ê–ø—Ä–µ–ª—è 2025, 19:00</p>
          </div>
        </a>
        <a href="event-traviata.html">
          <div class="event-image"></div>
          <div>
            <h4>–¢—Ä–∞–≤–∏–∞—Ç–∞</h4>
            <p>5 –ú–∞—è 2025, 18:30</p>
          </div>
        </a>
        <a href="event-zhenskiy.html">
          <div class="event-image"></div>
          <div>
            <h4>–ñ–µ–Ω—Å–∫–∏–π —Å—Ç–µ–Ω–¥–∞–ø</h4>
            <p>10 –ú–∞—è 2025, 20:00</p>
          </div>
        </a>
      </div>
      <footer class="footer">
        <div class="container">
          <p>
            –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã –û–û–ù –ö–ê–†–ê–ë–ê–°, –ª–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ –Ω–∞ 2025 –≥–æ–¥.
            <a href="license.html" target="_blank">–ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –ª–∏—Ü–µ–Ω–∑–∏–∏</a>
          </p>
        </div>
      </footer>
    </div>
  </div>
  <script>
    const events = {
      opera: [
        { name: "–ò–≥—Ä–æ–∫", site: null },
        { name: "–ó–æ–ª–æ—Ç–æ–π –ø–µ—Ç—É—à–æ–∫", site: null },
        { name: "–°–æ—Ä–æ—á–∏–Ω—Å–∫–∞—è —è—Ä–º–∞—Ä–∫–∞", site: null },
        { name: "–¢—Ä–∞–≤–∏–∞—Ç–∞", site: "https://www.mariinsky.ru" }
      ],
      theater: [
        { name: "–°–∞–º–æ—É–±–∏–π—Ü–∞", site: null },
        { name: "–¢–æ–π–±–µ–ª–µ –∏ –µ–µ –¥–µ–º–æ–Ω", site: null },
        { name: "–ö—Ä–∞—Å–∞–≤–∏—Ü–∞ –∏ –ß—É–¥–æ–≤–∏—â–µ", site: null }
      ],
      ballet: [
        { name: "–ñ–∞—Ä-–ø—Ç–∏—Ü–∞", site: null },
        { name: "–®–µ—Ö–µ—Ä–∞–∑–∞–¥–∞", site: null },
        { name: "–õ–µ–±–µ–¥–∏–Ω–æ–µ –æ–∑–µ—Ä–æ", site: "https://www.bolshoi.ru" },
        { name: "–ê–Ω—é—Ç–∞", site: null },
        { name: "–ñ—É—Ä–∞–≤–ª–∏–Ω–∞—è –ø–µ—Å–Ω—å", site: null }
      ],
      standup: [
        { name: "–ñ–µ–Ω—Å–∫–∏–π —Å—Ç–µ–Ω–¥–∞–ø", site: "https://standupmoscow.ru" },
        { name: "–°—Ç–µ–Ω–¥–∞–ø –≤ –ú–æ—Å–∫–≤–µ", site: null }
      ],
      exhibition: [
        { name: "–¢–µ–∞—Ç—Ä –±–∞–ª–µ—Ç–∞ –≠–π—Ñ–º–∞–Ω–∞. –¢–æ–ª—å–∫–æ –ª—é–±–æ–≤—å", site: null },
        { name: "–ü—É—Ç—å –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É", site: null },
        { name: "–ö–∞—Ä—Ç–∏–Ω–∫–∏ —Å –≤—ã—Å—Ç–∞–≤–∫–∏", site: null }
      ]
    };

    let selectedEvent = null;

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π
    document.getElementById('event-type').addEventListener('change', (e) => {
      const type = e.target.value;
      const eventNameSelect = document.getElementById('event-name');
      eventNameSelect.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–µ</option>';
      if (type && events[type]) {
        events[type].forEach(event => {
          const option = document.createElement('option');
          option.value = event.name;
          option.textContent = event.name;
          eventNameSelect.appendChild(option);
        });
      }
    });

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ QR-–∫–æ–¥–∞ –Ω–∞ Canvas
    function generateQRCode(text) {
      const canvas = document.getElementById('qr-code');
      const ctx = canvas.getContext('2d');
      canvas.width = 80;
      canvas.height = 80;
      ctx.fillStyle = '#FFFFFF';
      ctx.fillRect(0, 0, 80, 80);
      ctx.fillStyle = '#000000';
      const size = 4;
      for (let i = 0; i < 20; i++) {
        for (let j = 0; j < 20; j++) {
          if (Math.random() > 0.5) {
            ctx.fillRect(i * size, j * size, size, size);
          }
        }
      }
    }

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–∏–ª–µ—Ç–∞
    function generateTicket() {
      const eventType = document.getElementById('event-type').value;
      const eventName = document.getElementById('event-name').value;
      const date = document.getElementById('date').value;
      const time = document.getElementById('time').value;
      const city = document.getElementById('city').value;
      const fullName = document.getElementById('full-name').value;
      const row = document.getElementById('row').value;
      const seat = document.getElementById('seat').value;
      const price = document.getElementById('price').value;

      if (!eventType || !eventName || !date || !time || !city || !fullName || !row || !seat || !price) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
        return;
      }

      selectedEvent = events[eventType].find(e => e.name === eventName);

      document.getElementById('ticket-event-name').textContent = eventName;
      document.getElementById('ticket-date').textContent = date.split('-').reverse().join('.');
      document.getElementById('ticket-time').textContent = time;
      document.getElementById('ticket-city').textContent = city;
      document.getElementById('ticket-row-seat').textContent = `${row} —Ä—è–¥ ${seat} –º–µ—Å—Ç–æ`;
      document.getElementById('ticket-full-name').textContent = fullName;
      document.getElementById('ticket-price').textContent = `${price} –†`;

      generateQRCode(`FAKE TICKET ${fullName}`);

      document.getElementById('form-section').style.display = 'none';
      document.getElementById('privacy-section').style.display = 'none';
      document.getElementById('ticket-section').style.display = 'block';
      document.getElementById('ticket-buttons').style.display = 'block';
      document.getElementById('other-events').style.display = 'block';
    }

    // –í–æ–∑–≤—Ä–∞—Ç –∫ —Ñ–æ—Ä–º–µ
    function goBack() {
      document.getElementById('form-section').style.display = 'block';
      document.getElementById('privacy-section').style.display = 'block';
      document.getElementById('ticket-section').style.display = 'none';
      document.getElementById('ticket-buttons').style.display = 'none';
      document.getElementById('other-events').style.display = 'none';
      selectedEvent = null;
    }

    // –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å–∞–π—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
    function goToEventSite() {
      if (selectedEvent && selectedEvent.site) {
        window.open(selectedEvent.site, '_blank');
      } else {
        alert('–°–∞–π—Ç –¥–ª—è —ç—Ç–æ–≥–æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.');
      }
    }

    // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PNG
    function downloadPNG() {
      const ticket = document.getElementById('ticket-section');
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = ticket.offsetWidth;
      canvas.height = ticket.offsetHeight;

      // –§–æ–Ω –±–∏–ª–µ—Ç–∞
      ctx.fillStyle = '#FFFFFF';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
      ctx.fillStyle = '#020126';
      ctx.font = '36px sans-serif';
      ctx.fillText(document.getElementById('ticket-event-name').textContent, 20, 50);
      ctx.font = '14px sans-serif';
      ctx.fillText(document.getElementById('ticket-date').textContent, 20, 100);
      ctx.fillText(document.getElementById('ticket-time').textContent, 20, 120);
      ctx.fillText(`–ì–û–†–û–î: ${document.getElementById('ticket-city').textContent}`, 20, 160);
      ctx.fillText(`–†–Ø–î, –ú–ï–°–¢–û: ${document.getElementById('ticket-row-seat').textContent}`, 20, 180);
      ctx.fillText(`–§–ò–û: ${document.getElementById('ticket-full-name').textContent}`, 20, 200);
      ctx.fillText(`–°–¢–û–ò–ú–û–°–¢–¨: ${document.getElementById('ticket-price').textContent}`, 20, 220);

      // QR-–∫–æ–¥
      const qrCanvas = document.getElementById('qr-code');
      ctx.drawImage(qrCanvas, (canvas.width - 80) / 2, 240);

      // –ó–∞–≥—Ä—É–∑–∫–∞
      const link = document.createElement('a');
      link.download = 'fake-ticket.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    }

    // –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF
    function downloadPDF() {
      const ticket = document.getElementById('ticket-section');
      const canvas = document.createElement('canvas');
      const ctx = canvas.getContext('2d');
      canvas.width = ticket.offsetWidth;
      canvas.height = ticket.offsetHeight;

      // –§–æ–Ω –±–∏–ª–µ—Ç–∞
      ctx.fillStyle = '#FFFFFF';
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
      ctx.fillStyle = '#020126';
      ctx.font = '36px sans-serif';
      ctx.fillText(document.getElementById('ticket-event-name').textContent, 20, 50);
      ctx.font = '14px sans-serif';
      ctx.fillText(document.getElementById('ticket-date').textContent, 20, 100);
      ctx.fillText(document.getElementById('ticket-time').textContent, 20, 120);
      ctx.fillText(`–ì–û–†–û–î: ${document.getElementById('ticket-city').textContent}`, 20, 160);
      ctx.fillText(`–†–Ø–î, –ú–ï–°–¢–û: ${document.getElementById('ticket-row-seat').textContent}`, 20, 180);
      ctx.fillText(`–§–ò–û: ${document.getElementById('ticket-full-name').textContent}`, 20, 200);
      ctx.fillText(`–°–¢–û–ò–ú–û–°–¢–¨: ${document.getElementById('ticket-price').textContent}`, 20, 220);

      // QR-–∫–æ–¥
      const qrCanvas = document.getElementById('qr-code');
      ctx.drawImage(qrCanvas, (canvas.width - 80) / 2, 240);

      // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF
      const imgData = canvas.toDataURL('image/png');
      const pdfWindow = window.open('');
      pdfWindow.document.write(`
        <html>
          <body>
            <img src="${imgData}" style="width: 100%;">
          </body>
        </html>
      `);
      pdfWindow.document.close();
      pdfWindow.print();
    }
  </script>
</body>
</html>
